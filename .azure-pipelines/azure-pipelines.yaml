
variables:
  version: '0.1.0'

 # Use build number format, i.e. 0.1.0-B181101
name: $(version)-B$(date:yyMM)$(rev:rr)

trigger:
- master

pr:
  branches:
    include:
    - 'master'

stages:
- stage: Build
  displayName: Build stage
  jobs:
  - job:
    strategy:
      matrix:
        Linux:
          imageName: 'ubuntu-16.04'
        MacOS:
          imageName: 'macos-10.13'
        Windows:
          imageName: 'vs2017-win2016'
          publishModule: 'true'
          analysis: 'true'
          coverage: 'true'
    pool:
      vmImage: $(imageName)
    steps:
    - template: stages/build-pipeline.yaml
      parameters:
        version: $(version)
        imageName: $(imageName)
        publishModule: $(publishModule)
        analysis: $(analysis)
        coverage: $(coverage)
